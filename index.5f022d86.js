var t,e,r,n;t=document.querySelector("tbody"),e=document.querySelector("button"),r=Array.from(t.children),n=new/*#__PURE__*/(function(){var e;function n(e){var r,a,s=this;(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,n),r="updateBoardFromDOM",a=function(){Array.from(t.children).forEach(function(t,e){Array.from(t.children).forEach(function(t,r){s.board[e][r]=""===t.textContent?0:t.textContent})})},r in this?Object.defineProperty(this,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[r]=a,this.board=this.createEmptyBoard(),this.score=0,this.status="playing"}return e=[{key:"start",value:function(){this.deleteMessage(),this.clearBoard(),this.restart(),this.addSCore(),this.spawnTile(),this.spawnTile(),this.updateBoardFromDOM()}},{key:"deleteMessage",value:function(){var t=document.querySelector(".message-container").children[2];t.classList.remove("message-lose"),t.classList.remove("message-win"),t.classList.remove("message"),t.textContent=""}},{key:"spawnTile",value:function(){var e=function(){return Math.floor(4*Math.random())},n=Array.from(t.children),a=!1,s=!0,i=!1,o=void 0;try{for(var c,l=n[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var d=c.value;if(Array.from(d.children).some(function(t){return""===t.textContent})){a=!0;break}}}catch(t){i=!0,o=t}finally{try{s||null==l.return||l.return()}finally{if(i)throw o}}if(a)for(var u,h=!1;!h;)(u=r[e()].children[e()]).classList.contains("activ")||(u.textContent=.1>Math.random()?4:2,u.classList.add("activ"),2==+u.textContent&&u.classList.add("field-cell--2"),4==+u.textContent&&u.classList.add("field-cell--4"),h=!0)}},{key:"clearBoard",value:function(){t.querySelectorAll("td").forEach(function(t){t.textContent="",t.className="field-cell",t.removeAttribute("style")})}},{key:"restart",value:function(){this.board=this.createEmptyBoard(),this.score=0,this.status="playing";var t=document.querySelector(".button"),e=document.querySelector(".message-container");"Start"===t.textContent?(t.style.fontSize="18px",t.textContent="Restart",t.classList.add("restart")):(t.style.fontSize="18px",t.textContent="Start",t.classList.remove("restart"),t.classList.add("start"),e.children[2].textContent='Press "Start" to begin game. Good luck!',e.children[2].classList.add("message-start"),e.children[2].classList.add("message")),this.deleteMessage()}},{key:"createEmptyBoard",value:function(){return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}},{key:"getScore",value:function(){return this.score}},{key:"getStatus",value:function(){return this.status}},{key:"addColor",value:function(){Array.from(t.children).forEach(function(t){Array.from(t.children).forEach(function(t){switch(+t.textContent){case 2:t.classList.add("field-cell--2");break;case 4:t.classList.add("field-cell--4");break;case 8:t.classList.add("field-cell--8");break;case 16:t.classList.add("field-cell--16");break;case 32:t.classList.add("field-cell--32");break;case 64:t.classList.add("field-cell--64");break;case 128:t.classList.add("field-cell--128");break;case 256:t.classList.add("field-cell--256");break;case 512:t.classList.add("field-cell--512");break;case 1024:t.classList.add("field-cell--1024");break;case 2048:t.classList.add("field-cell--2048")}})})}},{key:"canContinueGame",value:function(){var t=[[],[],[],[]];this.board.forEach(function(e){t[0].push(e[0]),t[1].push(e[1]),t[2].push(e[2]),t[3].push(e[3])});var e=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;if(function(t){for(var e=t.filter(function(t){return 0!==t}),r=e.length,n=0;n<r;){if(e[n]===e[n+1])return!0;n++}}(i))return!0}}catch(t){r=!0,n=t}finally{try{e||null==s.return||s.return()}finally{if(r)throw n}}var o=[[],[],[],[]];this.board.forEach(function(t,e){o[e].push(t[0]),o[e].push(t[1]),o[e].push(t[2]),o[e].push(t[3])});var c=!0,l=!1,d=void 0;try{for(var u,h=o[Symbol.iterator]();!(c=(u=h.next()).done);c=!0){var f=u.value;if(function(t){for(var e=t.filter(function(t){return 0!==t}),r=e.length,n=0;n<r;){if(e[n]===e[n+1])return!0;n++}}(f))return!0}}catch(t){l=!0,d=t}finally{try{c||null==h.return||h.return()}finally{if(l)throw d}}var v=!0,y=!1,m=void 0;try{for(var g,C=this.board[Symbol.iterator]();!(v=(g=C.next()).done);v=!0)if(g.value.includes(0))return!0}catch(t){y=!0,m=t}finally{try{v||null==C.return||C.return()}finally{if(y)throw m}}return!1}},{key:"addSCore",value:function(){document.querySelector(".game-score").textContent=this.score}},{key:"getMessage",value:function(){var t=document.querySelector(".message-container");t.children[2].textContent=t.children[0].textContent,t.children[2].classList.add("message-lose"),t.children[2].classList.add("message")}},{key:"getMessageWin",value:function(){var t=document.querySelector(".message-container"),e=document.querySelector(".message-win");t.children[2].textContent=e.textContent,t.children[2].classList.add("message-win"),t.children[2].classList.add("message")}},{key:"moveUp",value:function(){var e=this;if(!this.canContinueGame()){this.getMessage(),this.status="finished";return}var r=JSON.stringify(this.board),n=[],a=[],s=[],i=[];this.board.forEach(function(t){n.push(t[0]),a.push(t[1]),s.push(t[2]),i.push(t[3])});var o=function(t){for(var r=t.filter(function(t){return 0!==t}),n=[],a=0;a<r.length;)a<r.length-1&&r[a]===r[a+1]?(n.push(2*r[a]),e.score+=2*r[a],a+=2):(n.push(r[a]),a++);for(;n.length<4;)n.push(0);return n},c=o(n),l=o(a),d=o(s),u=o(i);this.board=[[c[0],l[0],d[0],u[0]],[c[1],l[1],d[1],u[1]],[c[2],l[2],d[2],u[2]],[c[3],l[3],d[3],u[3]]],this.clearBoard();for(var h=Array.from(t.children),f=0;f<h.length;f++){var v=h[f].children;v[0].textContent=0===c[f]?"":c[f],v[1].textContent=0===l[f]?"":l[f],v[2].textContent=0===d[f]?"":d[f],v[3].textContent=0===u[f]?"":u[f],""!==v[0].textContent&&v[0].classList.add("activ"),""!==v[1].textContent&&v[1].classList.add("activ"),""!==v[2].textContent&&v[2].classList.add("activ"),""!==v[3].textContent&&v[3].classList.add("activ")}r!==JSON.stringify(this.board)&&this.spawnTile(),this.addColor(),this.addSCore(),this.board.some(function(t){return t.includes(2048)})&&this.getMessageWin(),this.updateBoardFromDOM()}},{key:"moveDown",value:function(){var e=this,r=[],n=[],a=[],s=[];this.board.forEach(function(t){r.push(t[0]),n.push(t[1]),a.push(t[2]),s.push(t[3])});var i=function(t){for(var r=t.filter(function(t){return 0!==t}),n=[],a=0;a<r.length;)a<r.length-1&&r[a]===r[a+1]?(n.push(2*r[a]),e.score+=2*r[a],a+=2):(n.push(r[a]),a++);for(;n.length<4;)n.unshift(0);return n},o=JSON.stringify(this.board),c=i(r),l=i(n),d=i(a),u=i(s);this.board=[[c[0],l[0],d[0],u[0]],[c[1],l[1],d[1],u[1]],[c[2],l[2],d[2],u[2]],[c[3],l[3],d[3],u[3]]],this.clearBoard();for(var h=Array.from(t.children),f=0;f<h.length;f++){var v=h[f].children;v[0].textContent=0===c[f]?"":c[f],v[1].textContent=0===l[f]?"":l[f],v[2].textContent=0===d[f]?"":d[f],v[3].textContent=0===u[f]?"":u[f],""!==v[0].textContent&&v[0].classList.add("activ"),""!==v[1].textContent&&v[1].classList.add("activ"),""!==v[2].textContent&&v[2].classList.add("activ"),""!==v[3].textContent&&v[3].classList.add("activ")}o!==JSON.stringify(this.board)&&this.spawnTile(),this.addColor(),this.addSCore(),this.board.some(function(t){return t.includes(2048)})&&this.getMessageWin(),this.updateBoardFromDOM()}},{key:"moveRight",value:function(){var e=this;if(!this.canContinueGame()){this.getMessage(),this.status="finished";return}var r=function(t){for(var r=t.filter(function(t){return 0!==t}),n=[],a=0;a<r.length;)a<r.length-1&&r[a]===r[a+1]?(n.push(2*r[a]),e.score+=2*r[a],a+=2):(n.push(r[a]),a++);for(;n.length<4;)n.unshift(0);return n},n=JSON.stringify(this.board),a=this.board.map(function(t){return r(t)});this.board=[[a[0][0],a[0][1],a[0][2],a[0][3]],[a[1][0],a[1][1],a[1][2],a[1][3]],[a[2][0],a[2][1],a[2][2],a[2][3]],[a[3][0],a[3][1],a[3][2],a[3][3]]],this.clearBoard();for(var s=Array.from(t.children),i=0;i<s.length;i++){var o=s[i].children;o[0].textContent=0===a[i][0]?"":a[i][0],o[1].textContent=0===a[i][1]?"":a[i][1],o[2].textContent=0===a[i][2]?"":a[i][2],o[3].textContent=0===a[i][3]?"":a[i][3],""!==o[0].textContent&&o[0].classList.add("activ"),""!==o[1].textContent&&o[1].classList.add("activ"),""!==o[2].textContent&&o[2].classList.add("activ"),""!==o[3].textContent&&o[3].classList.add("activ")}n!==JSON.stringify(this.board)&&this.spawnTile(),this.addColor(),this.addSCore(),this.board.some(function(t){return t.includes(2048)})&&this.getMessageWin(),this.updateBoardFromDOM()}},{key:"moveLeft",value:function(){var e=this,r=function(t){for(var r=t.filter(function(t){return 0!==t}),n=[],a=0;a<r.length;)a<r.length-1&&r[a]===r[a+1]?(n.push(2*r[a]),e.score+=2*r[a],a+=2):(n.push(r[a]),a++);for(;n.length<4;)n.push(0);return n},n=JSON.stringify(this.board),a=this.board.map(function(t){return r(t)});this.board=[[a[0][0],a[0][1],a[0][2],a[0][3]],[a[1][0],a[1][1],a[1][2],a[1][3]],[a[2][0],a[2][1],a[2][2],a[2][3]],[a[3][0],a[3][1],a[3][2],a[3][3]]],this.clearBoard();for(var s=Array.from(t.children),i=0;i<s.length;i++){var o=s[i].children;o[0].textContent=0===a[i][0]?"":a[i][0],o[1].textContent=0===a[i][1]?"":a[i][1],o[2].textContent=0===a[i][2]?"":a[i][2],o[3].textContent=0===a[i][3]?"":a[i][3],""!==o[0].textContent&&o[0].classList.add("activ"),""!==o[1].textContent&&o[1].classList.add("activ"),""!==o[2].textContent&&o[2].classList.add("activ"),""!==o[3].textContent&&o[3].classList.add("activ")}n!==JSON.stringify(this.board)&&this.spawnTile(),this.addColor(),this.addSCore(),this.board.some(function(t){return t.includes(2048)})&&this.getMessageWin(),this.updateBoardFromDOM()}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n.prototype,e),n}()),e.addEventListener("click",function(){n.start()}),document.addEventListener("keydown",function(t){switch(t.key){case"ArrowUp":n.moveUp();break;case"ArrowDown":n.moveDown();break;case"ArrowRight":n.moveRight();break;case"ArrowLeft":n.moveLeft()}});
//# sourceMappingURL=index.5f022d86.js.map
